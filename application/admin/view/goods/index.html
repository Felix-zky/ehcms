<section class="iframe-main">
	<div class="row">
		<ul>
			<li class="col-sm-3 col-lg-2">
				<div class="img">
					<img src="/uploader/1/20170704/70989f79038f04a41ca96821f3f1abe5.png">
				</div>
				<p>我是商品描述我是商品描述我是商品描述我是商品描述我是商品描述我是商品描述我是商品描述</p>
			</li>
			<li class="col-sm-3 col-lg-2">
				<div class="img">
					<img src="/uploader/1/20170704/70989f79038f04a41ca96821f3f1abe5.png">
				</div>
				<p>我是商品描述我是商品描述我是商品描述我是商品描述我是商品描述我是商品描述我是商品描述</p>
			</li>
			<li class="col-sm-3 col-lg-2">
				<div class="img">
					<img src="/uploader/1/20170704/70989f79038f04a41ca96821f3f1abe5.png">
				</div>
				<p>我是商品描述我是商品描述我是商品描述我是商品描述我是商品描述我是商品描述我是商品描述</p>
			</li>
			<li class="col-sm-3 col-lg-2">
				<div class="img">
					<img src="/uploader/1/20170704/70989f79038f04a41ca96821f3f1abe5.png">
				</div>
				<p>我是商品描述我是商品描述我是商品描述我是商品描述我是商品描述我是商品描述我是商品描述</p>
			</li>
			<li class="col-sm-3 col-lg-2">
				<div class="img">
					<img src="/uploader/1/20170704/70989f79038f04a41ca96821f3f1abe5.png">
				</div>
				<p>我是商品描述我是商品描述我是商品描述我是商品描述我是商品描述我是商品描述我是商品描述</p>
			</li>
			<li class="col-sm-3 col-lg-2">
				<div class="img">
					<img src="/uploader/1/20170704/70989f79038f04a41ca96821f3f1abe5.png">
				</div>
				<p>我是商品描述我是商品描述我是商品描述我是商品描述我是商品描述我是商品描述我是商品描述</p>
			</li>
		</ul>
		<div id="pages" class="col-sm-12">
		</div>
		<div id="operation">
			<i class="fa fa-pencil-square-o" id="update" title="编辑"></i>
			<i class="fa fa-trash-o" id="delete" title="删除"></i>
		</div>
	</div>
</section>
<script type="text/javascript">
	require(['jquery', 'dotdotdot'], function($, dotdotdot){
		var currentDocument = {};

		$('p').dotdotdot({
			height: 50
		});

		$(function(){
			$(window).resize(function() {
				setHeight();
				setOperation();
			});

			setHeight();
			setOperation();

			$('.img').mouseenter(function() {
				currentDocument = $(this);

				$('#operation').show();
				var offsetLeft = $(this).offset().left,
				offsetTop = $(this).offset().top;

				$('#operation').css({
					left: offsetLeft,
					top: offsetTop
				});				
			});

			$('#operation').mouseleave(function() {
				$('#operation').hide();
			});

			$('#delete').click(function() {
				if ($.isEmptyObject(currentDocument)) {
					return false;
				}
			});

			$('#update').click(function() {
				if ($.isEmptyObject(currentDocument)) {
					return false;
				}

				openEditor(currentDocument.data('id') + '/edit');
			});
		});

		function setHeight(){
			var width = $('li:eq(0) div').width();
			$('li div').height(width);
		}

		function setOperation(){
			var width = $('li:eq(0) div').outerWidth();

			$('#operation').css({
				width: width + 1,
				height: width + 1
			});

			$('#operation i').css({
				'font-size': (width + 1) / 4,
				top: (width + 1 - ((width + 1) / 4)) / 2
			});

			$('i#update').css({
				'left': (width + 1) / 6
			});

			$('i#delete').css({
				'right': (width + 1) / 6
			});
		}

		function openEditor(param){
			eh.closeParentSidebar();
			layer.open({
				type: 2,
				title: false,
				closeBtn: false,
				btn: false,
				area: ['100%', '100%'],
				content: '/goods/' + param + '.html',
				end: function(){
					location.reload();
				}
			});
		}
	});
</script>