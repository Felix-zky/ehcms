<header>
	<div class="pull-left">
		<button class="btn btn-danger" id="header-button-empty-form">清空表单</button>
		<button class="btn btn-success" id="header-button-submit-form">执行操作</button>
	</div>
</header>
<section class="iframe-main">
	<form class="form-horizontal" method="post" action="/admin/member_point/edit.html">
		<input type="hidden" name="id" id="member-id">
		<div class="form-group">
			<label for="select" class="col-sm-1 control-label">选择会员</label>
			<div class="col-sm-10">
				<div class="input-group">
					<input type="text" class="form-control" id="select" placeholder="输入积分卡号码">
					<span class="input-group-btn" id="select-member">
						<button class="btn btn-info" type="button">查询</button>
					</span>
				</div>
			</div>
		</div>
		<div class="form-group">
			<label for="true-name" class="col-sm-1 control-label">会员姓名</label>
			<div class="col-sm-10">
				<input type="text" class="form-control" id="true-name" disabled  placeholder="通过会员选择获得">
			</div>
		</div>
		<div class="form-group">
			<label for="true-name" class="col-sm-1 control-label">修改积分</label>
			<div class="col-sm-10">
				<input type="text" name="point" class="form-control" id="point" placeholder="正数为加，负数为减">
			</div>
		</div>
	</form>
</section>
<script type="text/javascript">
	require(['jquery', 'eh.xhr'], function(){
		$('#select-member').click(function() {
			eh.xhr.getCommon('/admin/member_point/getMember.html', {data: $('#select').val(), type: 'card'}, {fn: function(response){
				var data = response.data;

				$('#member-id').val(data.id);
				$('#true-name').val(data.true_name);
			}});
		});

		$('#header-button-submit-form').click(function() {
			$('form').submit();
		});
	});
</script>